<template>
  <div>
    <div class="d-flex" style="gap: 36px">
      <div
        class="cursor-pointer"
        @click="
          activeType = item.type;
          checkCustomType();
        "
        v-for="(item, index) in customMenu"
        :key="index"
      >
        {{ item.name }}
      </div>
    </div>
    <template v-for="(item, i) in custom" :key="i">
      <div class="d-flex custom-container" v-if="item.type === activeType">
        <div v-for="(value, j) in item.customItem" :key="j">
          <!-- :class="size === SizeEnum.SM ? item : item + '-' + 'lg'" -->
          <div
            style="width: 80px; font-size: 40px; color: grey"
            v-if="value.id === '0'"
            class="custom-item text-center pt-3"
            @click="
              activePart = '';
              avatarSelected['avatar_' + item.type] = '0';
              emit('selected', avatarSelected);
            "
          >
            üõá
          </div>
          <img
            v-else
            class="custom-item"
            :class="item.type + value.id === activePart ? 'active' : ''"
            :src="getImgUrl(item.type + value.id || '')"
            @click="
              activePart = item.type + value.id;
              avatarSelected['avatar_' + item.type] = value.id;
              emit('selected', avatarSelected);
            "
          />
        </div>
      </div>
    </template>
  </div>
</template>

<script lang="ts">
import { ref, watch } from "vue";
import { AllCustoms, CustomMenu, CustomTypeEnum } from "./Type";
export default {
  props: {
    userDetail: {
      type: Object,
      required: false,
    },
  },
  setup(props: any, { emit }: any) {
    const activeType = ref<CustomTypeEnum>(CustomTypeEnum.HAIR);
    const activePart = ref<string>("");
    const avatarSelected = ref<any>({
      avatar_face: null,
      avatar_head: null,
      avatar_hair: null,
      avatar_back: null,
      avatar_shirt: null,
      avatar_skin: null,
    });

    const customMenu = ref<CustomMenu[]>([
      { type: CustomTypeEnum.HAIR, name: "‡∏ó‡∏£‡∏á‡∏ú‡∏°" },
      { type: CustomTypeEnum.SHIRT, name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤" },
      { type: CustomTypeEnum.FACE, name: "‡∏´‡∏ô‡πâ‡∏≤" },
      { type: CustomTypeEnum.HEAD, name: "‡∏´‡∏°‡∏ß‡∏Å" },
      { type: CustomTypeEnum.BACK, name: "‡∏´‡∏•‡∏±‡∏á" },
    ]);
    const custom = ref<AllCustoms[]>([
      {
        type: CustomTypeEnum.HEAD,
        customItem: [
          { id: "0", description: "-", name: "-" },
          { id: "1", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "2", description: "-", name: "1" },
          { id: "3", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "4", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "5", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "6", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "7", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "8", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "9", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "10", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "11", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "12", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "13", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "14", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "15", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "16", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "17", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
        ],
      },
      {
        type: CustomTypeEnum.SHIRT,
        customItem: [
          { id: "0", description: "-", name: "-" },
          { id: "1", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "2", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "3", description: "-", name: "2" },
          { id: "4", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "5", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "6", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "7", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "8", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "9", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "10", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "11", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
        ],
      },
      {
        type: CustomTypeEnum.HAIR,
        customItem: [
          { id: "0", description: "-", name: "-" },
          { id: "1", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "2", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "3", description: "-", name: "3" },
          { id: "4", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "5", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "6", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "7", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "8", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "9", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "10", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "11", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "12", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "13", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "14", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "15", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "16", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "17", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "18", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "19", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "20", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "21", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "22", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "23", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "24", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "25", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "26", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "27", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "28", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
        ],
      },
      {
        type: CustomTypeEnum.BACK,
        customItem: [
          { id: "0", description: "-", name: "-" },
          { id: "1", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "2", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "3", description: "-", name: "4" },
          { id: "4", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "5", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "6", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "7", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          { id: "8", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
        ],
      },
      {
        type: CustomTypeEnum.FACE,
        customItem: [
          { id: "0", description: "-", name: "-" },
          { id: "1", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "2", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "3", description: "-", name: "5" },
          // { id: "4", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "5", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "6", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "7", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "8", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "9", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "10", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "11", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "12", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "13", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "14", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "15", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "16", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "17", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "18", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "19", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
          // { id: "20", description: "-", name: "‡πÄ‡∏Ñ‡∏£‡∏≤‡∏´‡∏°‡∏µ" },
        ],
      },
    ]);
    const userDetail = ref<any>(null);

    watch(
      () => props.userDetail,
      (newValue) => {
        userDetail.value = newValue;
        checkCustomType();
      }
    );

    const checkCustomType = () => {
      if (avatarSelected.value["avatar_" + activeType.value]) {
        activePart.value =
          activeType.value + avatarSelected.value["avatar_" + activeType.value];
      } else {
        for (const key in userDetail.value) {
          const [avatar, part] = key.split("_");
          if (avatar === "avatar") {
            if (activeType.value === part) {
              activePart.value = part + userDetail.value[key];
            }
          }
        }
      }
    };

    const getImgUrl = (value: string) => {
      var images = require.context("../assets/", false, /\.png$/);
      return images("./" + value + ".png");
    };

    return {
      custom,
      activeType,
      customMenu,
      getImgUrl,
      checkCustomType,
      activePart,
      avatarSelected,
      emit,
    };
  },
  components: {},
};
</script>

<style scoped>
.custom-container {
  flex-wrap: wrap;
  gap: 8px;
}

.custom-item {
  cursor: pointer;
  height: 80px;
}

.custom-item.active {
  border: 1px solid #ce1212;
  border-radius: 16px;
  background-color: #fff5f5;
}
</style>
